<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: validator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: validator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * Validate the values against a set of rules.
 * @param {String[]|Number[]|Boolean[]|
 *        Object[]|Array[]} values  The array of values to validate.
 * @param {Object} rules The rules.
 * @param {String} rules.type Define the data type.
 * @param {Number} [rules.min] The minimum value.
 * @param {Number} [rules.max] The maximum value.
 * @param {Boolean} [rules.undef] Allow undefined values.
 * @param {Boolean} [rules.null] Allow null values.
 * @return {Number}         Returns -1 if all values are correct or the index
 *                          of the first incorrect value.
 */
function validate(values, rules) {
  for (var i = 0; i &lt; values.length; i++) {
    if (!_validate(values[i], rules)) {
      return i;
    }
  }

  return -1;
}

function _validate(value, rules) {
  switch (rules.type) {
    case 'number':
      if (typeof value === 'number') {
        return _number(value, rules);
      }

      break;
    case 'string':
      if (typeof value === 'string') {
        return _string(value, rules);
      }

      break;
    case 'array':
      if (Array.isArray(value)) {
        return _array(value, rules);
      }

      break;
    case 'object':
      if (typeof value === 'object') {
        return _object(value, rules);
      }

      break;
    case 'num_boolean':
      return value === 0 || value === 1;
    case 'boolean':
      return typeof value === 'boolean';
  }

  if (rules.undef &amp;&amp; value === undefined ||
      rules.null &amp;&amp; value === null) {
    return true;
  }

  return false;
}

function _object(value, rules) {
  var min = rules.min;
  var max = rules.max;
  var length = -1;

  if (min !== undefined) {
    length = _objectLength(value);

    if (length &lt; min) {
      return false;
    }
  }

  if (max !== undefined) {
    if (length === -1) {
      length = _objectLength(value);
    }

    if (length > max) {
      return false;
    }
  }

  return true;
}

function _number(value, rules) {
  var min = rules.min;
  var max = rules.max;

  if (min !== undefined &amp;&amp; value &lt; min ||
      max !== undefined &amp;&amp; value > max) {
    return false;
  }

  return true;
}

function _string(value, rules) {
  var min = rules.min;
  var max = rules.max;

  if (min !== undefined &amp;&amp; value.length &lt; min ||
      max !== undefined &amp;&amp; value.length > max) {
    return false;
  }

  return true;
}

function _array(value, rules) {
  var min = rules.min;
  var max = rules.max;

  if (min !== undefined &amp;&amp; value.length &lt; min ||
      max !== undefined &amp;&amp; value.length > max) {
    return false;
  }

  return true;
}

function _objectLength(object) {
  /*jshint unused: false*/
  var length = 0;
  for (var i in object) {
    length++;
  }

  return length;
}

module.exports.validate = validate;

/**
 * The number type.
 * @type {String}
 */
module.exports.NUMBER = 'number';

/**
 * The string type.
 * @type {String}
 */
module.exports.STRING = 'string';

/**
 * The boolean type.
 * @type {String}
 */
module.exports.BOOLEAN = 'boolean';

/**
 * The array type.
 * @type {String}
 */
module.exports.ARRAY = 'array';

/**
 * The object type.
 * @type {String}
 */
module.exports.OBJECT = 'object';

/**
 * The numeric value type.
 * @type {String}
 */
module.exports.NUM_BOOLEAN = 'num_boolean';
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ARRAY">ARRAY</a></li><li><a href="global.html#BOOLEAN">BOOLEAN</a></li><li><a href="global.html#NUM_BOOLEAN">NUM_BOOLEAN</a></li><li><a href="global.html#NUMBER">NUMBER</a></li><li><a href="global.html#OBJECT">OBJECT</a></li><li><a href="global.html#STRING">STRING</a></li><li><a href="global.html#validate">validate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Jan 26 2016 22:24:51 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
